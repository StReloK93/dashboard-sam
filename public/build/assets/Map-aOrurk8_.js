import{I as f,b as i,J as u,d as g,B as m,i as y,o as T,c as _}from"./app-oCTcgIz-.js";const h=f("Geofences",()=>{const t=i();async function s(){const{data:a}=await u.get("/api/geofences/all");return t.value=a}return{geofences:t,getGeofenses:s}}),z=g({__name:"Map",setup(t){const s=h(),a=m(),r=i();function l(o){return o?"green":"red"}return y(async()=>{var o=L.map(r.value).setView([42.288903,63.857793],13);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{}).addTo(o),(await s.getGeofenses()).forEach(e=>{if(e.points.length==1){const n=e.points[0];L.circle([n.y,n.x],{radius:n.r,color:"green",weight:.85}).addTo(o).bindTooltip(e.name)}else{const n=e.points.map(c=>[c.y,c.x]);L.polygon(n,{color:"green",weight:.5}).addTo(o).bindTooltip(e.name)}}),(await a.getTransports()).forEach(e=>{L.circle([e.y,e.x],{radius:2,color:l(e.geozone),weight:.85}).addTo(o).bindTooltip(`${e.name} ${e.geozone}`)})}),(o,p)=>(T(),_("div",{ref_key:"mapdiv",ref:r,class:"absolute inset-0 opacity-100"},null,512))}});export{z as default};
