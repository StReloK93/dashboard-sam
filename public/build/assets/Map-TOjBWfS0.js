import{z as f,b as i,d as m,g as u,o as g,c as y}from"./app-GBJ28PQR.js";import{c as T,b as _}from"./Transports-nrnYIn47.js";const h=f("Geofences",()=>{const t=i();async function s(){const{data:r}=await T.get("/api/geofences/all");return t.value=r}return{geofences:t,getGeofenses:s}}),b=m({__name:"Map",setup(t){const s=h(),r=_(),a=i();function p(o){return o?"green":"red"}return u(async()=>{var o=L.map(a.value).setView([42.288903,63.857793],13);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{}).addTo(o),(await s.getGeofenses()).forEach(e=>{if(e.points.length==1){const n=e.points[0];L.circle([n.y,n.x],{radius:n.r,color:"green",weight:.85}).addTo(o).bindTooltip(e.name)}else{const n=e.points.map(c=>[c.y,c.x]);L.polygon(n,{color:"green",weight:.5}).addTo(o).bindTooltip(e.name)}}),(await r.getTransports()).forEach(e=>{L.circle([e.y,e.x],{radius:2,color:p(e.geozone),weight:.85}).addTo(o).bindTooltip(`${e.name} ${e.geozone}`)})}),(o,l)=>(g(),y("div",{ref_key:"mapdiv",ref:a,class:"absolute inset-0 opacity-100"},null,512))}});export{b as default};
